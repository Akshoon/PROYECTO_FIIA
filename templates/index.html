<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Base de Conciertos - Visualizaci√≥n de Eventos Musicales</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <!-- Graph Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/graphology@0.25.4/dist/graphology.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/graphology-layout@0.6.1/dist/graphology-layout.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/graphology-layout-forceatlas2@0.10.1/dist/graphology-layout-forceatlas2.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sigma@2.4.0/build/sigma.min.js"></script>
</head>
<body>
    <!-- ============ LANDING PAGE ============ -->
    <div class="landing-page" id="landing-page">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo" onclick="showLanding()">
                    <div class="logo-icon">üéµ</div>
                    <div class="logo-text">Base de Conciertos <span>Chile</span></div>
                </div>
                <nav class="nav-links">
                    <a href="#features">Caracter√≠sticas</a>
                    <a href="#data">Datos</a>
                    <a href="http://basedeconciertos.uahurtado.cl:5099/api" target="_blank">API</a>
                    <a href="#" onclick="showApp(); return false;" class="btn btn-primary" style="padding: 10px 20px;">Explorar Grafo</a>
                </nav>
            </div>
        </header>

        <!-- Hero Section -->
        <section class="hero">
            <div class="hero-content">
                <h1>Explora la Historia Musical de Chile</h1>
                <p>Visualiza y analiza m√°s de 50 a√±os de eventos musicales, compositores, int√©rpretes y obras a trav√©s de grafos interactivos.</p>
                <div class="hero-buttons">
                    <a href="#" onclick="showApp(); return false;" class="btn btn-primary">
                        <span>üîç</span> Explorar Grafo
                    </a>
                    <a href="#features" class="btn btn-secondary">
                        <span>üìñ</span> M√°s Informaci√≥n
                    </a>
                </div>
            </div>
        </section>

        <!-- Stats Section -->
        <section class="stats-section">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="landing-events">10,000+</div>
                    <div class="stat-label">Eventos</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">1945-1995</div>
                    <div class="stat-label">Per√≠odo</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="landing-composers">500+</div>
                    <div class="stat-label">Compositores</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="landing-cities">50+</div>
                    <div class="stat-label">Ciudades</div>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section class="features-section" id="features">
            <div class="section-title">
                <h2>Caracter√≠sticas</h2>
                <p>Herramientas poderosas para explorar datos musicales hist√≥ricos</p>
            </div>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">üï∏Ô∏è</div>
                    <h3>Visualizaci√≥n de Grafos</h3>
                    <p>Explora conexiones entre eventos, compositores, int√©rpretes y obras en un grafo interactivo.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üîç</div>
                    <h3>B√∫squeda Avanzada</h3>
                    <p>Filtra por a√±o, compositor, participante, obra, ciudad y m√°s.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üìä</div>
                    <h3>An√°lisis de Red</h3>
                    <p>Descubre patrones y relaciones en la historia musical chilena.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üóÑÔ∏è</div>
                    <h3>API REST</h3>
                    <p>Accede a los datos program√°ticamente con nuestra API p√∫blica.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üíæ</div>
                    <h3>Cach√© Local</h3>
                    <p>Los datos se almacenan localmente para acceso r√°pido sin conexi√≥n.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üì±</div>
                    <h3>Dise√±o Responsivo</h3>
                    <p>Funciona en escritorio, tablet y dispositivos m√≥viles.</p>
                </div>
            </div>
        </section>

        <!-- Data Types Section -->
        <section class="data-types" id="data">
            <div class="data-types-content">
                <div class="section-title">
                    <h2>Tipos de Datos</h2>
                    <p>Entidades conectadas en nuestra base de datos</p>
                </div>
                <div class="type-list">
                    <div class="type-badge">
                        <span class="type-dot" style="background: #34495e;"></span>
                        Eventos
                    </div>
                    <div class="type-badge">
                        <span class="type-dot" style="background: #7f8c8d;"></span>
                        Obras
                    </div>
                    <div class="type-badge">
                        <span class="type-dot" style="background: #e74c3c;"></span>
                        Compositores
                    </div>
                    <div class="type-badge">
                        <span class="type-dot" style="background: #95a5a6;"></span>
                        Participantes
                    </div>
                    <div class="type-badge">
                        <span class="type-dot" style="background: #bdc3c7;"></span>
                        Ciudades
                    </div>
                    <div class="type-badge">
                        <span class="type-dot" style="background: #3498db;"></span>
                        Instrumentos
                    </div>
                    <div class="type-badge">
                        <span class="type-dot" style="background: #9b59b6;"></span>
                        Tipos de Evento
                    </div>
                    <div class="type-badge">
                        <span class="type-dot" style="background: #1abc9c;"></span>
                        Ciclos
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <p>
                Proyecto de la <a href="https://www.uahurtado.cl" target="_blank">Universidad Alberto Hurtado</a> ¬∑ 
                Datos de <a href="http://basedeconciertos.uahurtado.cl:5099" target="_blank">Base de Conciertos</a>
            </p>
        </footer>
    </div>

    <!-- ============ APP PAGE ============ -->
    <div class="app-page" id="app-page">
        <!-- App Header -->
        <header class="app-header">
            <div class="app-logo" onclick="showLanding()">
                <span>üéµ</span>
                <span>Base de Conciertos</span>
            </div>
            <a href="#" onclick="showLanding(); return false;" class="back-btn">
                ‚Üê Volver al Inicio
            </a>
        </header>

        <!-- Filters Bar -->
        <div class="filters-bar">
            <select id="year-select" class="filter-select">
                <option value="">Todos los a√±os</option>
            </select>
            <input type="text" id="composer-search" class="filter-input" placeholder="Compositor...">
            <input type="text" id="participant-search" class="filter-input" placeholder="Participante...">
            <input type="text" id="piece-search" class="filter-input" placeholder="Obra...">
            <input type="text" id="event-search" class="filter-input" placeholder="Evento...">
            <input type="text" id="location-search" class="filter-input" placeholder="Ubicaci√≥n...">
            <input type="text" id="activity-search" class="filter-input" placeholder="Actividad...">
            <select id="gender-select" class="filter-select">
                <option value="">G√©nero</option>
                <option value="Masculino">Masculino</option>
                <option value="Femenino">Femenino</option>
            </select>
            <select id="limit-select" class="filter-select">
                <option value="100">100</option>
                <option value="200">200</option>
                <option value="500" selected>500</option>
                <option value="1000">1000</option>
                <option value="2000">2000</option>
            </select>
            <button id="load-btn" class="filter-btn filter-btn-primary">Filtrar</button>
            <button id="monthly-btn" class="filter-btn filter-btn-secondary">Cargar Todo</button>
            <button id="clear-btn" class="filter-btn filter-btn-secondary">Limpiar</button>
        </div>

        <!-- Graph Container -->
        <div class="graph-container">
            <div id="sigma-container"></div>

            <!-- Legend Panel -->
            <div class="legend-panel">
                <div class="legend-title">Leyenda</div>
                <div class="legend-item">
                    <span class="legend-color" style="background: #34495e;"></span>
                    <span>Evento</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color" style="background: #7f8c8d;"></span>
                    <span>Obra</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color" style="background: #e74c3c;"></span>
                    <span>Compositor</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color" style="background: #95a5a6;"></span>
                    <span>Participante</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color" style="background: #bdc3c7;"></span>
                    <span>Ubicaci√≥n</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color" style="background: #3498db;"></span>
                    <span>Instrumento</span>
                </div>
            </div>

            <!-- Stats Panel -->
            <div class="stats-panel">
                <div class="stats-title">Estad√≠sticas</div>
                <div class="stat-row">
                    <span class="label">Nodos</span>
                    <span class="value" id="stat-nodes">0</span>
                </div>
                <div class="stat-row">
                    <span class="label">Enlaces</span>
                    <span class="value" id="stat-edges">0</span>
                </div>
                <div class="stat-row">
                    <span class="label">Eventos</span>
                    <span class="value" id="stat-events">0</span>
                </div>
                <div class="stat-row">
                    <span class="label">Obras</span>
                    <span class="value" id="stat-pieces">0</span>
                </div>
                <div class="stat-row">
                    <span class="label">Personas</span>
                    <span class="value" id="stat-persons">0</span>
                </div>
                <div class="stat-row">
                    <span class="label">Grado Prom.</span>
                    <span class="value" id="stat-degree">0</span>
                </div>
            </div>

            <!-- Zoom Controls -->
            <div class="zoom-controls">
                <button id="zoom-in" class="zoom-btn" title="Acercar">+</button>
                <button id="zoom-out" class="zoom-btn" title="Alejar">‚àí</button>
                <button id="zoom-fit" class="zoom-btn" title="Ajustar">‚ä°</button>
            </div>

            <!-- Search Bar -->
            <div class="search-bar">
                <input type="text" id="graph-search-input" placeholder="üîç Buscar en el grafo...">
            </div>

            <!-- Loading Overlay -->
            <div class="loading-overlay" id="loading-overlay" style="display: none;">
                <div class="spinner"></div>
                <span>Cargando datos...</span>
            </div>
        </div>
    </div>

    <!-- Navigation Script -->
    <script>
        function showApp() {
            document.getElementById('landing-page').classList.add('hidden');
            document.getElementById('app-page').classList.add('active');
            // Trigger graph initialization
            if (typeof initializeGraph === 'function') {
                initializeGraph();
            }
        }

        function showLanding() {
            document.getElementById('landing-page').classList.remove('hidden');
            document.getElementById('app-page').classList.remove('active');
        }

        // Check URL hash for direct navigation
        if (window.location.hash === '#app') {
            showApp();
        }
    </script>

    <!-- Main Application Script -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>